<%- include('../../partials/_header', { user: user }) %>

<h2>Create New Article</h2>
<!-- Add enctype here! -->
<form action="/articles" method="POST" enctype="multipart/form-data">
  <div>
    <label for="title" class="block text-sm font-medium text-gray-700">Title</label>
    <input type="text" name="title" id="title" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
  </div>

  <!-- Add this new file input -->
  <div>
    <label for="headerImage" class="block text-sm font-medium text-gray-700">Header Image</label>
    <input type="file" name="headerImage" id="headerImage" accept="image/*" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
  </div>

  <div>
    <label for="content" class="block text-sm font-medium text-gray-700">Content</label>
    <textarea name="content" id="markdown-editor"></textarea>
  </div>
  <button type="submit" name="action" value="publish" class="w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 ">Publish Article</button>
  <button type="submit" name="action" value="save_draft" class="w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
    Save as Draft
  </button>
</form>

<script>
  const easyMDE = new EasyMDE({element: document.getElementById('markdown-editor')});
</script>

<%- include('../../partials/_footer') %>
